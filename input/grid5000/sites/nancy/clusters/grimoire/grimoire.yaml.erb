nodes:
<% (1..8).each { |i| %>
  grimoire-<%= i %>:
    network_adapters:
      eth0: 
        mounted: true
        ip: 172.16.71.<%= i %>
        mac: <%= %w(
                    24:6e:96:03:0c:c8
                    24:6e:96:03:24:78
                    24:6e:96:03:20:f0
                    24:6e:96:02:a7:c8
                    24:6e:96:02:96:90
                    24:6e:96:02:a3:88
                    24:6e:96:02:a9:78
                    24:6e:96:02:a0:88
                   )[i-1] %>
      eth1:
<% i11_18 = i + 10 %>
        ip: 172.16.71.<%= i11_18 %>
      eth2:
<% i21_28 = i + 20 %>
        ip: 172.16.71.<%= i21_28 %>
      eth3:
<% i31_38 = i + 30 %>
        ip: 172.16.71.<%= i31_38 %>
      ib0:
        ip: 172.18.71.<%= i %>
      bmc:
        ip: 172.17.71.<%= i %>
        mac: <%= %w(
                   64:00:6a:bf:83:98
                   64:00:6a:c0:f3:0e
                   64:00:6a:c0:f2:18
                   64:00:6a:c0:f0:ba
                   64:00:6a:c0:f1:78
                   64:00:6a:c0:f1:74
                   64:00:6a:c0:f1:54
                   64:00:6a:c0:f1:24
                  )[i-1] %>

<% i166_174 = i + 165 %>
    kavlan:
      eth0:
        kavlan-1: 192.168.203.<%= i %>
        kavlan-2: 192.168.219.<%= i %>
        kavlan-3: 192.168.234.<%= i %>
        kavlan-4: 10.16.11.<%= i %>
        kavlan-5: 10.16.75.<%= i %>
        kavlan-6: 10.16.139.<%= i %>
        kavlan-7: 10.16.203.<%= i %>
        kavlan-8: 10.17.11.<%= i %>
        kavlan-9: 10.17.75.<%= i %>
        kavlan-11: 10.7.201.<%= i166_174 %>
        kavlan-12: 10.11.201.<%= i166_174 %>
        kavlan-13: 10.15.201.<%= i166_174 %>
        kavlan-14: 10.19.201.<%= i166_174 %>
        kavlan-16: 10.27.201.<%= i166_174 %>
        kavlan-18: 10.35.201.<%= i166_174 %>
        kavlan-19: 10.39.201.<%= i166_174 %>
        kavlan-20: 10.43.201.<%= i166_174 %>
        kavlan-21: 10.47.201.<%= i166_174 %>
<% } %>
